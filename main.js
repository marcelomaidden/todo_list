(()=>{"use strict";class t{constructor(e=!1,o,s,c,r,i,d){e?(t.id=e,this.id=t.id):this.id=t.id,this.project=o,this.title=s,this.description=c,this.dueDate=r,this.priority=i,this.card=this.card.bind(this),this.complete=d,t.id+=1}static priorityColor(t){switch(t){case"1":return"hsl(0, 0%, 100%)";case"2":return"hsl(171, 100%, 41%)";case"3":return"hsl(204, 86%, 53%)";case"4":return"hsl(141, 53%, 53%)";case"5":return"hsl(348, 100%, 61%)";default:return"hsl(0, 0%, 100%)"}}static deleteTodo(t){const e=new o,s=e.myTodos.filter((e=>e.id===t))[0],c=document.querySelector(`.${s.project}`),r=`.todo${t}`,i=document.querySelector(r);c.removeChild(i),e.remove(t)}card(){const e=document.createElement("div");e.setAttribute("class",`card todo${this.id}`);const s=document.createElement("div");s.setAttribute("class","card-content");const c=document.createElement("div");c.setAttribute("class","media");const r=document.createElement("div");r.setAttribute("class","media-content");const i=document.createElement("p");i.setAttribute("class","title is-4"),i.innerText=`Title: ${this.title}`;const d=document.createElement("p");d.setAttribute("class","subtitle is-6"),d.innerText=`Description: ${this.description}`;const n=document.createElement("p");n.setAttribute("class","subtitle is-6"),n.innerText=`Priority: ${this.priority}`;const l=document.createElement("p");l.setAttribute("class","subtitle is-6"),l.innerText=`Due date: ${this.dueDate}`;const a=document.createElement("label");a.innerText=" Mark as complete: ";const u=document.createElement("input");u.setAttribute("type","checkbox"),u.setAttribute("id",this.id),!0===this.complete?(u.setAttribute("checked","true"),e.setAttribute("style","background-color: hsl(0, 0%, 86%)")):e.setAttribute("style",`background-color: ${t.priorityColor(this.priority)}`),u.addEventListener("click",(()=>{const e=new o,s=e.myTodos.filter((t=>t.id===this.id))[0],c=document.querySelector(`.todo${s.id}`);!0===s.complete?(c.setAttribute("style",`background-color: ${t.priorityColor(s.priority)}`),s.complete=!1):(s.complete=!0,c.setAttribute("style","background-color: hsl(0, 0%, 86%)"));const r=s;e.remove(s.id),e.addTodo(r)}),!1);const m=document.createElement("button");m.setAttribute("class","button submit is-link"),m.setAttribute("id",this.id),m.innerText="Delete",m.addEventListener("click",(()=>{t.deleteTodo(this.id)})),r.appendChild(i),r.appendChild(d),r.appendChild(n),r.appendChild(l),r.appendChild(m),r.appendChild(a),r.appendChild(u),c.appendChild(r),s.appendChild(c),e.appendChild(s),document.querySelector(`.${this.project}`).appendChild(e)}}t.id=0;const e=t,o=class{constructor(){localStorage.myTodos?this.myTodos=JSON.parse(localStorage.myTodos||"[]"):this.myTodos=[],this.setStorage=this.setStorage.bind(this),this.addTodo=this.addTodo.bind(this),this.remove=this.remove.bind(this)}setStorage(){localStorage.setItem("myTodos",JSON.stringify(this.myTodos))}remove(t){const e=[];this.myTodos.forEach((o=>{o.id!==t&&e.push(o)})),this.myTodos=e,this.setStorage()}addTodo(t){this.myTodos.push(t),this.setStorage()}listTodos(){this.myTodos.forEach((t=>{const{id:o,project:s,title:c,description:r,priority:i,dueDate:d,complete:n}=t;new e(o,s,c,r,d,i,n).card()}))}},s=class{constructor(t,e){t=t.split(" ").join("-"),console.log(t),this.name=t,this.color=e}},c=document.querySelector("main");class r{constructor(){if(localStorage.myProjects)this.myProjects=JSON.parse(localStorage.myProjects||"[]");else{const t=new s("default","hsl(204, 86%, 53%)");this.myProjects=[],this.myProjects.push(t),this.setStorage()}this.setStorage=this.setStorage.bind(this)}setStorage(){localStorage.setItem("myProjects",JSON.stringify(this.myProjects))}static createCard(t,e){const o=document.createElement("div");o.setAttribute("class",`box ${t}`),o.setAttribute("style",`background-color:${e}`);const s=document.createElement("div"),r=document.createElement("strong");r.innerText=t.split("-").join(" "),s.appendChild(r),o.appendChild(s),c.appendChild(o)}addProject(t){this.myProjects.push(t),this.setStorage(),r.createCard(t.name,t.color)}listProjects(){this.myProjects.map((t=>r.createCard(t.name,t.color)))}}const i=new r;i.listProjects();const d=new o;d.listTodos();const n=()=>{document.querySelectorAll("input").forEach((t=>{t.value=""}))},l=t=>{const e=document.querySelector(".project"),o=document.createElement("option");o.setAttribute("value",t),o.text=t,e.add(o)},a=()=>{document.querySelector(".modal").setAttribute("class","modal")};document.querySelector(".submit").addEventListener("click",(t=>{t.preventDefault();const o=document.querySelector(".project"),s=document.querySelector(".todo-title"),c=document.querySelector(".description"),r=document.querySelector(".priority"),i=document.querySelector(".due-date"),l=new e(!1,o.value,s.value,c.value,i.value,r.value,!1);l.card(),d.addTodo(l),n()}),!1),document.querySelector(".cancel").addEventListener("click",n,!1),document.querySelector(".cancel-project").addEventListener("click",a,!1),document.querySelector(".modal-close").addEventListener("click",a,!1),document.querySelector(".modal-button").addEventListener("click",(()=>{document.querySelector(".modal").setAttribute("class","modal is-active")}),!1),document.querySelector(".submit-project").addEventListener("click",(()=>{const t=document.querySelector(".project-name"),e=document.querySelector(".project-color"),o=new s(t.value,e.value);i.addProject(o),l(o.name),a()}),!1),document.querySelector(".project").innerHTML="",i.myProjects.map((t=>l(t.name)))})();