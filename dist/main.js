(()=>{"use strict";class e{constructor(t=!1,o,r,s,c,i,n){t?(e.id=t,this.id=e.id):this.id=e.id,this.project=o,this.title=r,this.description=s,this.dueDate=c,this.priority=i,this.card=this.card.bind(this),this.complete=n,e.id+=1}static priorityColor(e){switch(e){case"1":return"hsl(0, 0%, 100%)";case"2":return"hsl(171, 100%, 41%)";case"3":return"hsl(204, 86%, 53%)";case"4":return"hsl(141, 53%, 53%)";case"5":return"hsl(348, 100%, 61%)";default:return"hsl(0, 0%, 100%)"}}static deleteTodo(e){const t=new o,r=t.myTodos.filter((t=>t.id===e))[0],s=document.querySelector(`.${r.project}`),c=`.todo${e}`,i=document.querySelector(c);s.removeChild(i),t.remove(e)}card(){const t=document.createElement("div");t.setAttribute("class",`card todo${this.id}`);const r=document.createElement("div");r.setAttribute("class","card-content");const s=document.createElement("div");s.setAttribute("class","media");const c=document.createElement("div");c.setAttribute("class","media-content");const i=document.createElement("p");i.setAttribute("class","title is-4"),i.innerText=`Title: ${this.title}`;const n=document.createElement("p");n.setAttribute("class","subtitle is-6"),n.innerText=`Description: ${this.description}`;const d=document.createElement("p");d.setAttribute("class","subtitle is-6"),d.innerText=`Priority: ${this.priority}`;const l=document.createElement("p");l.setAttribute("class","subtitle is-6"),l.innerText=`Due date: ${this.dueDate}`;const a=document.createElement("label");a.innerText=" Mark as complete: ";const u=document.createElement("input");u.setAttribute("type","checkbox"),u.setAttribute("id",this.id),!0===this.complete?(u.setAttribute("checked","true"),t.setAttribute("style","background-color: hsl(0, 0%, 86%)")):t.setAttribute("style",`background-color: ${e.priorityColor(this.priority)}`),u.addEventListener("click",(()=>{const t=new o,r=t.myTodos.filter((e=>e.id===this.id))[0],s=document.querySelector(`.todo${r.id}`);!0===r.complete?(s.setAttribute("style",`background-color: ${e.priorityColor(r.priority)}`),r.complete=!1):(r.complete=!0,s.setAttribute("style","background-color: hsl(0, 0%, 86%)"));const c=r;t.remove(r.id),t.addTodo(c)}),!1);const m=document.createElement("button");m.setAttribute("class","button submit is-link"),m.setAttribute("id",this.id),m.innerText="Delete",m.addEventListener("click",(()=>{e.deleteTodo(this.id)})),c.appendChild(i),c.appendChild(n),c.appendChild(d),c.appendChild(l),c.appendChild(m),c.appendChild(a),c.appendChild(u),s.appendChild(c),r.appendChild(s),t.appendChild(r),document.querySelector(`.${this.project}`).appendChild(t)}}e.id=0;const t=e,o=class{constructor(){localStorage.myTodos?this.myTodos=JSON.parse(localStorage.myTodos||"[]"):this.myTodos=[],this.setStorage=this.setStorage.bind(this),this.addTodo=this.addTodo.bind(this),this.remove=this.remove.bind(this)}setStorage(){localStorage.setItem("myTodos",JSON.stringify(this.myTodos))}remove(e){const t=[];this.myTodos.forEach((o=>{o.id!==e&&t.push(o)})),this.myTodos=t,this.setStorage()}addTodo(e){this.myTodos.push(e),this.setStorage()}listTodos(){this.myTodos.forEach((e=>{const{id:o,project:r,title:s,description:c,priority:i,dueDate:n,complete:d}=e;new t(o,r,s,c,n,i,d).card()}))}},r=class{constructor(e,t){e=e.split(" ").join("-"),this.name=e,this.color=t}},s=document.querySelector("main");class c{constructor(){if(localStorage.myProjects)this.myProjects=JSON.parse(localStorage.myProjects||"[]");else{const e=new r("default","hsl(204, 86%, 53%)");this.myProjects=[],this.myProjects.push(e),this.setStorage()}this.setStorage=this.setStorage.bind(this)}setStorage(){localStorage.setItem("myProjects",JSON.stringify(this.myProjects))}static createCard(e,t){const o=document.createElement("div");o.setAttribute("class",`box ${e}`),o.setAttribute("style",`background-color:${t}`);const r=document.createElement("div"),c=document.createElement("strong");c.innerText=e.split("-").join(" "),r.appendChild(c),o.appendChild(r),s.appendChild(o)}addProject(e){this.myProjects.push(e),this.setStorage(),c.createCard(e.name,e.color)}listProjects(){this.myProjects.map((e=>c.createCard(e.name,e.color)))}}const i=new c;i.listProjects();const n=new o;n.listTodos();const d=()=>{document.querySelectorAll("input").forEach((e=>{e.value=""}))},l=e=>{const t=document.querySelector(".project"),o=document.createElement("option");o.setAttribute("value",e),o.text=e,t.add(o)},a=()=>{document.querySelector(".modal").setAttribute("class","modal")};document.querySelector(".submit").addEventListener("click",(e=>{e.preventDefault();const o=document.querySelector(".project"),r=document.querySelector(".todo-title"),s=document.querySelector(".description"),c=document.querySelector(".priority"),i=document.querySelector(".due-date");if((e=>{let t=!0;const o=document.querySelector(".todo-errors");return o.innerHTML="",e.forEach((e=>{if(!e.value.length){const r=document.createElement("p");r.setAttribute("class","help is-danger"),r.innerHTML=`${e.name} can't be empty`,o.appendChild(r),o.setAttribute("style","border: 2px solid red"),t=t&&!1}})),t})([o,r,s,c,i])){const e=new t(!1,o.value,r.value,s.value,i.value,c.value,!1);e.card(),n.addTodo(e),d()}}),!1),document.querySelector(".cancel").addEventListener("click",d,!1),document.querySelector(".cancel-project").addEventListener("click",a,!1),document.querySelector(".modal-close").addEventListener("click",a,!1),document.querySelector(".modal-button").addEventListener("click",(()=>{document.querySelector(".modal").setAttribute("class","modal is-active")}),!1),document.querySelector(".submit-project").addEventListener("click",(()=>{const e=document.querySelector(".project-name");if(e.value.length){const t=document.querySelector(".project-color"),o=new r(e.value,t.value);i.addProject(o),l(o.name),a()}else{const e=document.querySelector(".project-errors");e.innerHTML="";const t=document.createElement("p");t.setAttribute("class","help is-danger"),t.innerHTML="Project name can't be empty",e.setAttribute("style","border: 2px solid red"),e.appendChild(t)}}),!1),document.querySelector(".project").innerHTML="",i.myProjects.map((e=>l(e.name)))})();