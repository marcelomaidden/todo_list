(()=>{"use strict";class e{constructor(t,o,s,c,r){this.id=e.id,this.project=t,this.title=o,this.description=s,this.dueDate=c,this.priority=r,this.createCard=this.createCard.bind(this),e.id+=1}static deleteTodo(e){const t=new o,s=t.myTodos.filter((t=>t.id===e))[0],c=document.querySelector(`.${s.project}`),r=`.todo${e}`,i=document.querySelector(r);c.removeChild(i),t.remove(e)}createCard(){const t=document.createElement("div");t.setAttribute("class",`card todo${this.id}`);const o=document.createElement("div");o.setAttribute("class","card-content");const s=document.createElement("div");s.setAttribute("class","media");const c=document.createElement("div");c.setAttribute("class","media-content");const r=document.createElement("p");r.setAttribute("class","title is-4"),r.innerText=this.title;const i=document.createElement("p");i.setAttribute("class","subtitle is-6"),i.innerText=this.description;const n=document.createElement("p");n.setAttribute("class","subtitle is-6"),n.innerText=this.priority;const d=document.createElement("p");d.setAttribute("class","subtitle is-6"),d.innerText=this.dueDate;const a=document.createElement("button");a.setAttribute("class","button submit is-link"),a.setAttribute("id",this.id),a.innerText="Delete",a.addEventListener("click",(()=>{e.deleteTodo(this.id)})),c.appendChild(r),c.appendChild(i),c.appendChild(n),c.appendChild(d),c.appendChild(a),s.appendChild(c),o.appendChild(s),t.appendChild(o),document.querySelector(`.${this.project}`).appendChild(t)}}e.id=0;const t=e,o=class{constructor(){localStorage.myTodos?this.myTodos=JSON.parse(localStorage.myTodos||"[]"):this.myTodos=[],this.setStorage=this.setStorage.bind(this),this.addTodo=this.addTodo.bind(this),this.remove=this.remove.bind(this)}setStorage(){localStorage.setItem("myTodos",JSON.stringify(this.myTodos))}remove(e){const t=[];this.myTodos.forEach((o=>{o.id!==e&&t.push(o)})),this.myTodos=t,this.setStorage()}addTodo(e){this.myTodos.push(e),this.setStorage()}listTodos(){this.myTodos.forEach((e=>{const{project:o,title:s,description:c,priority:r,dueDate:i}=e;new t(o,s,c,r,i).createCard()}))}},s=class{constructor(e,t){this.name=e,this.color=t}},c=document.querySelector("main");class r{constructor(){if(localStorage.myProjects)this.myProjects=JSON.parse(localStorage.myProjects||"[]");else{const e=new s("default","hsl(204, 86%, 53%)");this.myProjects=[],this.myProjects.push(e),this.setStorage()}this.setStorage=this.setStorage.bind(this)}setStorage(){localStorage.setItem("myProjects",JSON.stringify(this.myProjects))}static createCard(e,t){const o=document.createElement("div");o.setAttribute("class",`box ${e}`),o.setAttribute("style",`background-color:${t}`);const s=document.createElement("div");s.innerText=e,o.appendChild(s),c.appendChild(o)}addProject(e){this.myProjects.push(e),this.setStorage(),r.createCard(e.name,e.color)}listProjects(){this.myProjects.map((e=>r.createCard(e.name,e.color)))}}const i=new r;i.listProjects();const n=new o;function d(){document.querySelectorAll("input").forEach((e=>{e.value=""}))}function a(e){const t=document.querySelector(".project"),o=document.createElement("option");o.text=e,t.add(o)}function l(){document.querySelector(".modal").setAttribute("class","modal")}n.listTodos(),document.querySelector(".submit").addEventListener("click",(function(e){e.preventDefault();const o=document.querySelector(".project"),s=document.querySelector(".todo-title"),c=document.querySelector(".description"),r=document.querySelector(".priority"),i=document.querySelector(".due-date"),a=new t(o.value,s.value,c.value,i.value,r.value);a.createCard(),n.addTodo(a),d()}),!1),document.querySelector(".cancel").addEventListener("click",d,!1),document.querySelector(".cancel-project").addEventListener("click",l,!1),document.querySelector(".modal-close").addEventListener("click",l,!1),document.querySelector(".modal-button").addEventListener("click",(function(){document.querySelector(".modal").setAttribute("class","modal is-active")}),!1),document.querySelector(".submit-project").addEventListener("click",(function(){const e=document.querySelector(".project-name"),t=document.querySelector(".project-color"),o=new s(e.value,t.value);i.addProject(o),a(o.name),l()}),!1),document.querySelector(".project").innerHTML="",i.myProjects.map((e=>a(e.name)))})();